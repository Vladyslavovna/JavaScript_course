<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Завдання 4</title>
</head>
Створити клас TBankomat, який моделює роботу банкомата. Клас повинен містити поля для зберігання кількості купюр кожного
із номіналів від 5 до 200 гривень. Реалізувати методи знаходження максимальної та мінімальної сум, які може видати
банкомат, та метод зняття деякої суми.

<body>
	<script>

		//Класс для хранения купюр

		class TBanknote {
			constructor(rate, amount) {
				this.rate = rate
				this.amount = amount
			}
			toString() {
				return `${this.rate} : ${this.amount} `
			}
		}

		let banknotes = [
			new TBanknote(5, 1),
			new TBanknote(10, 7),
			new TBanknote(20, 6),
			new TBanknote(50, 2),
			new TBanknote(100, 3),
			new TBanknote(200, 5),

		]


		class TBankomat {
			constructor(banknotesList) {
				this.banknotesList = banknotesList
			}

			//Методы

			//Метод для нахождения максимальной суммы в банкомате

			GetMaxSum(banknotesList) {
				let maxAmount = 0
				for(let denomination in this.banknotesList) {  //проходимся по всему массиву
					let banknote = this.banknotesList[denomination]  //находим по банкноте и её значению
					let amount = banknote.amount * banknote.rate //умножаем номинал на количество
					maxAmount += amount  //кладём это в переменную
				}
				return `Максимальна сума у банкоматі : ${maxAmount} грн`
			}

			//Метод для нахождения минимальной суммы в банкомате
			GetMinSum(banknotesList) {
				let minAmount = Infinity //устанавливаем для счётчика минимальное значение
				for(let denomination in this.banknotesList) { //проходимся по всем значениям  в массиве
					let banknote = this.banknotesList[denomination] //устанавливаем переменной значение каждого ключа в с массива
					if(banknote.amount > 0 && banknote.rate < minAmount) //если количество банкнот больше 0 и номинал банкноты меньше минимального значения minAmount
						minAmount = banknote.rate //кладём этот минимальный номинал в переменную для минимального значения с массива
				}
				if(minAmount === Infinity) throw new Error('Помилка')
				return ` Мінімальна сума для зняття : ${minAmount} грн`
			}

			//Метод снятия денег с банкомата 
			Withdraw(totalSum, banknotesList) {
				let withdrawBanknotes = [] //массив для определения количества банкнот,которые были выданы
				let remainingAmount = totalSum
				let sortedBanknotes = this.banknotesList.sort((a, b) => b.rate - a.rate) //Сортируем банкноты от большего номанила к меньшему(что-бы сначала выдавались крупные купюры в зависимости от запрашиваемой суммы)
				for(let i = 0; i < sortedBanknotes.length; i++) { //иттерируем по всему массиву
					let banknote = sortedBanknotes[i] //на каждой иттерации переменная banknote присваивается текущей банкноте
					let denomination = banknote.rate //на каждой иттерации переменная denomination присваивается номиналу текущей банкноте 
					let banknoteToWithdraw = Math.floor(remainingAmount / denomination) //Вычисляем количество банкнот,которые нужно выдать
					if(banknoteToWithdraw > banknote.amount) banknoteToWithdraw = banknote.amount //Если количество банкнот которые нужно выдать больше чем количество банкнот текущего номинала,тогда банкомат будет выдавать все доступные банкноты данного номинала
					let withdrawAmount = banknoteToWithdraw * denomination //Вычисляем общую сумму которую нужно выдать
					remainingAmount -= withdrawAmount //вычитаем эту сумму
					if(banknoteToWithdraw > 0) { //если количество банкнот которые нужно выдать больше 0,то
						withdrawBanknotes.push(new TBankomat(denomination, banknoteToWithdraw))// создаём новый экземпляр объекта,и пушим его в массив 
						banknote.amount -= banknoteToWithdraw //и вычитаем количество снятыъ денег
					}
					if(remainingAmount === 0) break //если запрашиваемая сумма равна 0,то цикл прерывается
				}
				if(remainingAmount > 1) throw new Error('Помилка') //Если после прохождения цикла "for" значение "remainingAmount" осталось больше единицы, то функция генерирует исключение с помощью оператора "throw new Error('Помилка')". Это означает, что функция не смогла выдать всю запрошенную сумму и возникла ошибка.
				return withdrawBanknotes
			}

		}

		let r1 = new TBankomat(banknotes)
		console.log(r1)
		r1.Withdraw(100)
		console.log(r1)





	</script>
</body>

</html>